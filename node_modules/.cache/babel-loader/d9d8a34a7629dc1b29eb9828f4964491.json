{"remainingRequest":"/Users/huangweihusn/frank_code/frank-portal/node_modules/babel-loader/lib/index.js!/Users/huangweihusn/frank_code/frank-portal/node_modules/eslint-loader/index.js??ref--13-0!/Users/huangweihusn/frank_code/frank-portal/src/auth/index.js","dependencies":[{"path":"/Users/huangweihusn/frank_code/frank-portal/src/auth/index.js","mtime":1619799550016},{"path":"/Users/huangweihusn/frank_code/frank-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huangweihusn/frank_code/frank-portal/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/huangweihusn/frank_code/frank-portal/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9odWFuZ3dlaWh1c24vZnJhbmtfY29kZS9mcmFuay1wb3J0YWwvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIGZyb20gIi9Vc2Vycy9odWFuZ3dlaWh1c24vZnJhbmtfY29kZS9mcmFuay1wb3J0YWwvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zZWFyY2guanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBWdWUgZnJvbSAidnVlIjsKaW1wb3J0IGNyZWF0ZUF1dGgwQ2xpZW50IGZyb20gIkBhdXRoMC9hdXRoMC1zcGEtanMiOwovKiogRGVmaW5lIGEgZGVmYXVsdCBhY3Rpb24gdG8gcGVyZm9ybSBhZnRlciBhdXRoZW50aWNhdGlvbiAqLwoKdmFyIERFRkFVTFRfUkVESVJFQ1RfQ0FMTEJBQ0sgPSBmdW5jdGlvbiBERUZBVUxUX1JFRElSRUNUX0NBTExCQUNLKCkgewogIHJldHVybiB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUoe30sIGRvY3VtZW50LnRpdGxlLCB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUpOwp9OwoKdmFyIGluc3RhbmNlOwovKiogUmV0dXJucyB0aGUgY3VycmVudCBpbnN0YW5jZSBvZiB0aGUgU0RLICovCgpleHBvcnQgdmFyIGdldEluc3RhbmNlID0gZnVuY3Rpb24gZ2V0SW5zdGFuY2UoKSB7CiAgcmV0dXJuIGluc3RhbmNlOwp9OwovKiogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGUgQXV0aDAgU0RLLiBJZiBvbmUgaGFzIGFscmVhZHkgYmVlbiBjcmVhdGVkLCBpdCByZXR1cm5zIHRoYXQgaW5zdGFuY2UuICovCgpleHBvcnQgdmFyIHVzZUF1dGgwID0gZnVuY3Rpb24gdXNlQXV0aDAoX3JlZikgewogIHZhciBfcmVmJG9uUmVkaXJlY3RDYWxsYmEgPSBfcmVmLm9uUmVkaXJlY3RDYWxsYmFjaywKICAgICAgb25SZWRpcmVjdENhbGxiYWNrID0gX3JlZiRvblJlZGlyZWN0Q2FsbGJhID09PSB2b2lkIDAgPyBERUZBVUxUX1JFRElSRUNUX0NBTExCQUNLIDogX3JlZiRvblJlZGlyZWN0Q2FsbGJhLAogICAgICBfcmVmJHJlZGlyZWN0VXJpID0gX3JlZi5yZWRpcmVjdFVyaSwKICAgICAgcmVkaXJlY3RVcmkgPSBfcmVmJHJlZGlyZWN0VXJpID09PSB2b2lkIDAgPyB3aW5kb3cubG9jYXRpb24ub3JpZ2luIDogX3JlZiRyZWRpcmVjdFVyaSwKICAgICAgb3B0aW9ucyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcmVmLCBbIm9uUmVkaXJlY3RDYWxsYmFjayIsICJyZWRpcmVjdFVyaSJdKTsKCiAgaWYgKGluc3RhbmNlKSByZXR1cm4gaW5zdGFuY2U7IC8vIFRocyAnaW5zdGFuY2UnIGlzIHNpbXBseSBhIFZ1ZSBvYmplY3QKCiAgaW5zdGFuY2UgPSBuZXcgVnVlKHsKICAgIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgbG9hZGluZzogdHJ1ZSwKICAgICAgICBpc0F1dGhlbnRpY2F0ZWQ6IGZhbHNlLAogICAgICAgIHVzZXI6IHt9LAogICAgICAgIGF1dGgwQ2xpZW50OiBudWxsLAogICAgICAgIHBvcHVwT3BlbjogZmFsc2UsCiAgICAgICAgZXJyb3I6IG51bGwKICAgICAgfTsKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgIC8qKiBBdXRoZW50aWNhdGVkIHRoZSB1c2VyIHVzaW5nIGEgcG9wdXAgd2luZG93ICovCiAgICAgIGxvZ2luV2l0aFBvcHVwOiBmdW5jdGlvbiBsb2dpbldpdGhQb3B1cChvKSB7CiAgICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgX3RoaXMucG9wdXBPcGVuID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuYXV0aDBDbGllbnQubG9naW5XaXRoUG9wdXAobyk7CgogICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gOTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gNjsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgxKTsKICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lCiAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoX2NvbnRleHQudDApOwoKICAgICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDk7CiAgICAgICAgICAgICAgICAgIF90aGlzLnBvcHVwT3BlbiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuZmluaXNoKDkpOwoKICAgICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNDsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmF1dGgwQ2xpZW50LmdldFVzZXIoKTsKCiAgICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgICBfdGhpcy51c2VyID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgICAgX3RoaXMuaXNBdXRoZW50aWNhdGVkID0gdHJ1ZTsKCiAgICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMSwgNiwgOSwgMTJdXSk7CiAgICAgICAgfSkpKCk7CiAgICAgIH0sCgogICAgICAvKiogSGFuZGxlcyB0aGUgY2FsbGJhY2sgd2hlbiBsb2dnaW5nIGlzIHVzaW5nIGEgcmVkaXJlY3QgKi8KICAgICAgaGFuZGxlUmVkaXJlY3RDYWxsYmFjazogZnVuY3Rpb24gaGFuZGxlUmVkaXJlY3RDYWxsYmFjaygpIHsKICAgICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICBfdGhpczIubG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMTsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0OwogICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLmF1dGgwQ2xpZW50LmhhbmRsZVJlZGlyZWN0Q2FsbGJhY2soKTsKCiAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5hdXRoMENsaWVudC5nZXRVc2VyKCk7CgogICAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgICBfdGhpczIudXNlciA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgICBfdGhpczIuaXNBdXRoZW50aWNhdGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAxMDsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLnQwID0gX2NvbnRleHQyWyJjYXRjaCJdKDEpOwogICAgICAgICAgICAgICAgICBfdGhpczIuZXJyb3IgPSBfY29udGV4dDIudDA7CgogICAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAxMzsKICAgICAgICAgICAgICAgICAgX3RoaXMyLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5maW5pc2goMTMpOwoKICAgICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9jYWxsZWUyLCBudWxsLCBbWzEsIDEwLCAxMywgMTZdXSk7CiAgICAgICAgfSkpKCk7CiAgICAgIH0sCgogICAgICAvKiogQXV0aGVudGljYXRlcyB0aGUgdXNlciB1c2luZyB0aGUgcmVkaXJlY3QgbWV0aG9kICovCiAgICAgIGxvZ2luV2l0aFJlZGlyZWN0OiBmdW5jdGlvbiBsb2dpbldpdGhSZWRpcmVjdChvKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuYXV0aDBDbGllbnQubG9naW5XaXRoUmVkaXJlY3Qobyk7CiAgICAgIH0sCgogICAgICAvKiogUmV0dXJucyBhbGwgdGhlIGNsYWltcyBwcmVzZW50IGluIHRoZSBJRCB0b2tlbiAqLwogICAgICBnZXRJZFRva2VuQ2xhaW1zOiBmdW5jdGlvbiBnZXRJZFRva2VuQ2xhaW1zKG8pIHsKICAgICAgICByZXR1cm4gdGhpcy5hdXRoMENsaWVudC5nZXRJZFRva2VuQ2xhaW1zKG8pOwogICAgICB9LAoKICAgICAgLyoqIFJldHVybnMgdGhlIGFjY2VzcyB0b2tlbi4gSWYgdGhlIHRva2VuIGlzIGludmFsaWQgb3IgbWlzc2luZywgYSBuZXcgb25lIGlzIHJldHJpZXZlZCAqLwogICAgICBnZXRUb2tlblNpbGVudGx5OiBmdW5jdGlvbiBnZXRUb2tlblNpbGVudGx5KG8pIHsKICAgICAgICByZXR1cm4gdGhpcy5hdXRoMENsaWVudC5nZXRUb2tlblNpbGVudGx5KG8pOwogICAgICB9LAoKICAgICAgLyoqIEdldHMgdGhlIGFjY2VzcyB0b2tlbiB1c2luZyBhIHBvcHVwIHdpbmRvdyAqLwogICAgICBnZXRUb2tlbldpdGhQb3B1cDogZnVuY3Rpb24gZ2V0VG9rZW5XaXRoUG9wdXAobykgewogICAgICAgIHJldHVybiB0aGlzLmF1dGgwQ2xpZW50LmdldFRva2VuV2l0aFBvcHVwKG8pOwogICAgICB9LAoKICAgICAgLyoqIExvZ3MgdGhlIHVzZXIgb3V0IGFuZCByZW1vdmVzIHRoZWlyIHNlc3Npb24gb24gdGhlIGF1dGhvcml6YXRpb24gc2VydmVyICovCiAgICAgIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KG8pIHsKICAgICAgICByZXR1cm4gdGhpcy5hdXRoMENsaWVudC5sb2dvdXQobyk7CiAgICAgIH0KICAgIH0sCgogICAgLyoqIFVzZSB0aGUgbGlmZWN5Y2xlIG1ldGhvZCB0byBpbnN0YW50aWF0ZSB0aGUgU0RLIGNsaWVudCAqLwogICAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICB2YXIgX3lpZWxkJF90aGlzMyRhdXRoMENsLCBhcHBTdGF0ZTsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVBdXRoMENsaWVudCh7CiAgICAgICAgICAgICAgICAgIGRvbWFpbjogb3B0aW9ucy5kb21haW4sCiAgICAgICAgICAgICAgICAgIGNsaWVudF9pZDogb3B0aW9ucy5jbGllbnRJZCwKICAgICAgICAgICAgICAgICAgYXVkaWVuY2U6IG9wdGlvbnMuYXVkaWVuY2UsCiAgICAgICAgICAgICAgICAgIHJlZGlyZWN0X3VyaTogcmVkaXJlY3RVcmkKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBfdGhpczMuYXV0aDBDbGllbnQgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gMzsKCiAgICAgICAgICAgICAgICBpZiAoISh3aW5kb3cubG9jYXRpb24uc2VhcmNoLmluY2x1ZGVzKCJjb2RlPSIpICYmIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guaW5jbHVkZXMoInN0YXRlPSIpKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDc7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzLmF1dGgwQ2xpZW50LmhhbmRsZVJlZGlyZWN0Q2FsbGJhY2soKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgX3lpZWxkJF90aGlzMyRhdXRoMENsID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgICAgICBhcHBTdGF0ZSA9IF95aWVsZCRfdGhpczMkYXV0aDBDbC5hcHBTdGF0ZTsKICAgICAgICAgICAgICAgIC8vIE5vdGlmeSBzdWJzY3JpYmVycyB0aGF0IHRoZSByZWRpcmVjdCBjYWxsYmFjayBoYXMgaGFwcGVuZWQsIHBhc3NpbmcgdGhlIGFwcFN0YXRlCiAgICAgICAgICAgICAgICAvLyAodXNlZnVsIGZvciByZXRyaWV2aW5nIGFueSBwcmUtYXV0aGVudGljYXRpb24gc3RhdGUpCiAgICAgICAgICAgICAgICBvblJlZGlyZWN0Q2FsbGJhY2soYXBwU3RhdGUpOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxNTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSAxMjsKICAgICAgICAgICAgICAgIF9jb250ZXh0My50MCA9IF9jb250ZXh0M1siY2F0Y2giXSgzKTsKICAgICAgICAgICAgICAgIF90aGlzMy5lcnJvciA9IF9jb250ZXh0My50MDsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gMTU7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDE4OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMy5hdXRoMENsaWVudC5pc0F1dGhlbnRpY2F0ZWQoKTsKCiAgICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICAgIF90aGlzMy5pc0F1dGhlbnRpY2F0ZWQgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjE7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzLmF1dGgwQ2xpZW50LmdldFVzZXIoKTsKCiAgICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgICAgIF90aGlzMy51c2VyID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgICAgICBfdGhpczMubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5maW5pc2goMTUpOwoKICAgICAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzLCBudWxsLCBbWzMsIDEyLCAxNSwgMjRdXSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0pOwogIHJldHVybiBpbnN0YW5jZTsKfTsgLy8gQ3JlYXRlIGEgc2ltcGxlIFZ1ZSBwbHVnaW4gdG8gZXhwb3NlIHRoZSB3cmFwcGVyIG9iamVjdCB0aHJvdWdob3V0IHRoZSBhcHBsaWNhdGlvbgoKZXhwb3J0IHZhciBBdXRoMFBsdWdpbiA9IHsKICBpbnN0YWxsOiBmdW5jdGlvbiBpbnN0YWxsKFZ1ZSwgb3B0aW9ucykgewogICAgVnVlLnByb3RvdHlwZS4kYXV0aCA9IHVzZUF1dGgwKG9wdGlvbnMpOwogIH0KfTs="},{"version":3,"sources":["/Users/huangweihusn/frank_code/frank-portal/src/auth/index.js"],"names":["Vue","createAuth0Client","DEFAULT_REDIRECT_CALLBACK","window","history","replaceState","document","title","location","pathname","instance","getInstance","useAuth0","onRedirectCallback","redirectUri","origin","options","data","loading","isAuthenticated","user","auth0Client","popupOpen","error","methods","loginWithPopup","o","console","getUser","handleRedirectCallback","loginWithRedirect","getIdTokenClaims","getTokenSilently","getTokenWithPopup","logout","created","domain","client_id","clientId","audience","redirect_uri","search","includes","appState","Auth0Plugin","install","prototype","$auth"],"mappings":"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","sourcesContent":["import Vue from \"vue\";\nimport createAuth0Client from \"@auth0/auth0-spa-js\";\n\n/** Define a default action to perform after authentication */\nconst DEFAULT_REDIRECT_CALLBACK = () =>\n    window.history.replaceState({}, document.title, window.location.pathname);\nlet instance;\n\n/** Returns the current instance of the SDK */\nexport const getInstance = () => instance;\n\n/** Creates an instance of the Auth0 SDK. If one has already been created, it returns that instance. */\nexport const useAuth0 = ({\n    onRedirectCallback = DEFAULT_REDIRECT_CALLBACK,\n    redirectUri = window.location.origin,\n    ...options\n}) => {\n    if (instance) return instance;\n\n    // Ths 'instance' is simply a Vue object\n    instance = new Vue({\n        data() {\n            return {\n                loading: true,\n                isAuthenticated: false,\n                user: {},\n                auth0Client: null,\n                popupOpen: false,\n                error: null\n            };\n        },\n        methods: {\n            /** Authenticated the user using a popup window */\n            async loginWithPopup(o) {\n                this.popupOpen = true;\n\n                try {\n                    await this.auth0Client.loginWithPopup(o);\n                } catch (e) {\n                    // eslint-disable-next-line\n                    console.error(e);\n                } finally {\n                    this.popupOpen = false;\n                }\n\n                this.user = await this.auth0Client.getUser();\n                this.isAuthenticated = true;\n            },\n            /** Handles the callback when logging is using a redirect */\n            async handleRedirectCallback() {\n                this.loading = true;\n                try {\n                    await this.auth0Client.handleRedirectCallback();\n                    this.user = await this.auth0Client.getUser();\n                    this.isAuthenticated = true;\n                } catch (e) {\n                    this.error = e;\n                } finally {\n                    this.loading = false;\n                }\n            },\n            /** Authenticates the user using the redirect method */\n            loginWithRedirect(o) {\n                return this.auth0Client.loginWithRedirect(o);\n            },\n            /** Returns all the claims present in the ID token */\n            getIdTokenClaims(o) {\n                return this.auth0Client.getIdTokenClaims(o);\n            },\n            /** Returns the access token. If the token is invalid or missing, a new one is retrieved */\n            getTokenSilently(o) {\n                return this.auth0Client.getTokenSilently(o);\n            },\n            /** Gets the access token using a popup window */\n            getTokenWithPopup(o) {\n                return this.auth0Client.getTokenWithPopup(o);\n            },\n            /** Logs the user out and removes their session on the authorization server */\n            logout(o) {\n                return this.auth0Client.logout(o);\n            }\n        },\n        /** Use the lifecycle method to instantiate the SDK client */\n        async created() {\n            // Create a new instance of the SDK client using members of the given options object\n            this.auth0Client = await createAuth0Client({\n                domain: options.domain,\n                client_id: options.clientId,\n                audience: options.audience,\n                redirect_uri: redirectUri\n            });\n\n            try {\n                // If the user is returning to the app after authentication\n                if (\n                    window.location.search.includes(\"code=\") &&\n                    window.location.search.includes(\"state=\")\n                ) {\n                    // handle the redirect and retrieve tokens\n                    const { appState } = await this.auth0Client.handleRedirectCallback();\n\n                    // Notify subscribers that the redirect callback has happened, passing the appState\n                    // (useful for retrieving any pre-authentication state)\n                    onRedirectCallback(appState);\n                }\n            } catch (e) {\n                this.error = e;\n            } finally {\n                this.isAuthenticated = await this.auth0Client.isAuthenticated();\n                this.user = await this.auth0Client.getUser();\n                this.loading = false;\n            }\n        }\n    });\n\n    return instance;\n};\n\n// Create a simple Vue plugin to expose the wrapper object throughout the application\nexport const Auth0Plugin = {\n    install(Vue, options) {\n        Vue.prototype.$auth = useAuth0(options);\n    }\n};"]}]}